listen:
  port: 4040
  address: "10.1.2.3"
  metrics_endpoint: "/metrics"

consul:
  enable: true
  address: "localhost:8500"
  datacenter: dc1
  scheme: http
  token: ""
  service:
    id: "nginx-exporter"
    name: "nginx-exporter"
    address = "192.168.3.1"
    tags: ["foo", "bar"]

namespaces:
  - name: app1
    format: "$remote_addr - $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" \"$http_x_forwarded_for\""
    source:
      files:
        - /var/log/nginx/app1/access.log
    # metrics_override:
    #   prefix: "myprefix"
    # namespace_label: "vhost"
    labels:
      app: "application-one"
      environment: "production"
      foo: "bar"
    histogram_buckets: [.005, .01, .025, .05, .1, .25, .5, 1, 2.5, 5, 10]

    # metrics_type: 1: Counter, 2: Gauge, 4: Histogram, 8: Summary, 二进制组合, 对应指标自动添加后缀: _total, _gauge, _hist, _summary
    others_metrics_type:
      body_bytes_sent:
        metrics_name: "http_response_size_bytes"
        metrics_help: "Total amount of transferred bytes"
        metrics_type: 1
      request_time:
        metrics_name: "http_response_time_seconds"
        metrics_help: "Time needed by NGINX to handle requests"
        metrics_type: 8
        max_age: 60s
        objectives:
          0.5: 0.05
          0.9: 0.01
          0.99: 0.001
      upstream_header_time:
        metrics_name: "upstream_header_time_seconds"
        metrics_help: "Time needed by upstream server to send response"
        metrics_type: 12
        histogram_buckets: [0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5, 10]
        max_age: 60s
        objectives:
          0.5: 0.05
          0.9: 0.01
          0.99: 0.001

  - name: app2
    format: "$remote_addr - $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" \"$http_x_forwarded_for\" $upstream_response_time"
    source:
      files:
        - /var/log/nginx/app2/access.log